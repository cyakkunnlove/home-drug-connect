# 薬剤データアーキテクチャ

## 3層構造のデータ管理

### 1. マスターデータ層（PostgreSQL）
最適化された薬剤マスターデータを保存
- 一般名ベースの統一データ
- 全文検索インデックス
- 定期的な更新（月1回）

### 2. キャッシュ層（Redis/Memory）
高速アクセス用のキャッシュ
- 頻出薬剤のメモリキャッシュ
- 検索結果のキャッシュ
- TTL: 24時間

### 3. 静的配信層（CDN/JSON）
超高速レスポンス用
- 頻出薬剤TOP1000のJSONファイル
- CDN配信
- ビルド時に生成

## データフロー

```
[厚労省Excel] 
    ↓ (月1回)
[ETLスクリプト]
    ↓
[PostgreSQL] → [Redis Cache] → [API]
    ↓                              ↑
[Static JSON] → [CDN] → [Client Cache]
```

## 実装優先順位

1. **Phase 1**: PostgreSQL + API最適化（実装済み）
2. **Phase 2**: 静的JSONファイル生成
3. **Phase 3**: Redisキャッシュ層（オプション）